<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tiket Parkir â€” Card in Card</title>
<style>
:root{
  --umk-blue:#114A9B;
  --umk-yellow:#FBCE00;
  --text-putih:#fff;
  --card-bg:rgba(255,255,255,0.18);
  --card-border:rgba(255,255,255,0.25);
  --btn-grad-start:#1c4f95;
  --btn-grad-end:#2273f8;
  --btn-hover-start:#1767c4;
  --btn-hover-end:#2fa1ff;
}

body{
  font-family:'AeonikPro',Arial,sans-serif;
  background:var(--umk-blue);
  color:var(--text-putih);
  margin:0;
  min-height:100vh;
  overflow-x:hidden;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
}

/* Background blob */
.background-blob{
  position:absolute;
  border-radius:50%;
  filter:blur(100px);
  opacity:.6;
  z-index:-1;
  animation:moveBlob 25s infinite alternate ease-in-out;
}
.blob-1{width:50vw;height:50vw;max-width:500px;max-height:500px;background:var(--umk-blue);top:-10vh;left:-15vw;}
.blob-2{width:60vw;height:60vw;max-width:600px;max-height:600px;background:#ffffff;bottom:-15vh;right:-20vw;animation-delay:-5s;}
.blob-3{width:40vw;height:40vw;max-width:400px;max-height:400px;background:var(--umk-yellow);bottom:5vh;left:10vw;animation-delay:-10s;}
@keyframes moveBlob{
  0%{transform:translate(0,0) scale(1);}
  50%{transform:translate(80px,100px) scale(1.2);}
  100%{transform:translate(-50px,-80px) scale(0.9);}
}

/* Tombol Generate */
#genBtn{
  position:fixed;
  bottom:60px;
  left:50%;
  transform:translateX(-50%);
  padding:0.9em 2.4em;
  border:none;
  border-radius:2em;
  background:linear-gradient(120deg,var(--btn-grad-start) 55%,var(--btn-grad-end) 100%);
  color:#fff;
  font-size:1.2rem;
  font-weight:600;
  cursor:pointer;
  box-shadow:0 4px 24px 0 #2264c944,0 1.5px 1.5px #fff7 inset,0 0 0 3px #2273f855 inset;
  border:1.5px solid #75baff88;
  transition:background .2s,box-shadow .2s;
  z-index:20;
}
#genBtn:hover{
  background:linear-gradient(120deg,var(--btn-hover-start) 40%,var(--btn-hover-end) 100%);
  box-shadow:0 8px 32px 2px #1c7cf944,0 0 0 6px #49d2ff55;
}

/* Sheet (slide-up) */
.sheet{
  position:fixed;
  left:50%;
  transform:translateX(-50%);
  bottom:-100vh;
  width:min(92vw,440px);
  transition:bottom .6s ease;
  z-index:10;
}
.sheet.visible{bottom:14vh;}

/* Wrapper & Flip */
.wrapper{width:100%;perspective:1200px;}
.card{
  position:relative;width:100%;
  transform-style:preserve-3d;
  transition:transform .8s cubic-bezier(.2,.7,.2,1);
}
.wrapper.flipped .card{transform:rotateY(180deg);}

/* Card face */
.face{
  position:relative;width:100%;
  border-radius:24px;
  background:var(--card-bg);
  border:1.5px solid var(--card-border);
  backdrop-filter:blur(18px) saturate(180%);
  box-shadow:0 10px 30px rgba(0,0,0,0.12);
  padding:2rem;
  display:flex;
  flex-direction:column;
  gap:16px;
  backface-visibility:hidden;
}
.back{position:absolute;inset:0;transform:rotateY(180deg);}

/* Header */
.topbar{display:flex;align-items:center;justify-content:space-between;}
.title{font-size:1.2rem;font-weight:600;color:var(--umk-yellow);}
.icon{width:36px;height:36px;border-radius:50%;background:rgba(255,255,255,0.25);display:grid;place-items:center;font-size:1.2rem;}

/* QR container (card dalam card) */
.qr-container{
  display:flex;
  justify-content:center;
}
.qr-card{
  background:rgba(255,255,255,0.25);
  border:1.5px solid rgba(255,255,255,0.35);
  border-radius:20px;
  padding:20px;
  box-shadow:0 5px 15px rgba(0,0,0,0.25);
  backdrop-filter:blur(10px);
  display:flex;
  justify-content:center;
  align-items:center;
}
.qr-card img{
  width:200px;
  height:200px;
  border-radius:10px;
}

/* Info */
.info-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;}
.pill{background:rgba(255,255,255,0.2);border:1px solid rgba(255,255,255,0.25);border-radius:16px;padding:12px;text-align:center;}
.pill h4{font-size:.9rem;color:#fefefe;font-weight:500;}
.pill p{font-weight:600;color:#fff;}
.detail{background:rgba(255,255,255,0.15);border:1px solid rgba(255,255,255,0.3);border-radius:16px;padding:14px;color:#f3f3f3;font-size:.95rem;line-height:1.4;}
.footer{margin-top:auto;display:flex;align-items:center;justify-content:space-between;gap:12px;border:1px solid rgba(255,255,255,0.3);border-radius:16px;padding:12px;background:rgba(255,255,255,0.1);}
.cta{background:linear-gradient(120deg,var(--btn-grad-start) 55%,var(--btn-grad-end) 100%);color:#fff;border:none;border-radius:1.5em;padding:10px 20px;font-weight:600;cursor:pointer;transition:background .3s;}
.cta:hover{background:linear-gradient(120deg,var(--btn-hover-start) 40%,var(--btn-hover-end) 100%);}
.cta:disabled{background:#55efc4;color:#0f5132;}
.badge{position:absolute;top:16px;right:16px;background:#fff;color:var(--umk-blue);padding:6px 10px;border-radius:999px;font-weight:600;font-size:.85rem;}

@media(max-width:480px){
  .face{padding:1.5rem;}
  .sheet.visible{bottom:10vh;}
  .qr-card img{width:180px;height:180px;}
}
</style>
</head>
<body>

<!-- Background blobs -->
<div class="background-blob blob-1"></div>
<div class="background-blob blob-2"></div>
<div class="background-blob blob-3"></div>

<!-- Tombol -->
<button id="genBtn">Generate QR</button>

<!-- Card -->
<div class="sheet" id="sheet">
  <div class="wrapper" id="wrap">
    <div class="card">

      <!-- DEPAN -->
      <section class="face front">
        <div class="topbar">
          <span class="title">Tiket Parkir â€¢ Masuk</span><div class="icon">âŸ³</div>
        </div>

        <div class="qr-container">
          <div class="qr-card">
            <img id="qrMasuk" src="" alt="QR Masuk">
          </div>
        </div>

        <div class="info-grid">
          <div class="pill"><h4>Waktu Masuk</h4><p id="jamMasuk">-</p></div>
          <div class="pill"><h4>Status</h4><p id="statusMasuk">Menunggu Verifikasi</p></div>
          <div class="pill"><h4>Lokasi</h4><p>Gate A1</p></div>
          <div class="pill"><h4>Kendaraan</h4><p>Motor</p></div>
        </div>

        <div class="detail">
          Tunjukkan QR ini ke petugas gerbang untuk verifikasi. Setelah berhasil, kartu akan berputar menampilkan QR keluar.
        </div>

        <div class="footer">
          <span id="idMasuk">ID: -</span>
          <button class="cta" id="simulateBtn">Simulasikan Scan</button>
        </div>
      </section>

      <!-- BELAKANG -->
      <section class="face back">
        <span class="badge">Aktif</span>
        <div class="topbar">
          <span class="title">Tiket Parkir â€¢ Keluar</span><div class="icon">ðŸ”’</div>
        </div>
        <div class="qr-container">
          <div class="qr-card">
            <img id="qrKeluar" src="" alt="QR Keluar">
          </div>
        </div>

        <div class="info-grid">
          <div class="pill"><h4>Waktu Masuk</h4><p id="masuk2">-</p></div>
          <div class="pill"><h4>Waktu Aktif</h4><p id="aktifAt">-</p></div>
          <div class="pill"><h4>Durasi</h4><p id="durasi">â€”</p></div>
          <div class="pill"><h4>Estimasi</h4><p id="biaya">Rp 0</p></div>
        </div>
        <div class="detail">Gunakan QR ini saat keluar. Biaya akhir dihitung di gerbang.</div>
        <div class="footer">
          <span id="idKeluar">ID: -</span>
          <button class="cta" id="doneBtn" disabled>QR Keluar Aktif</button>
        </div>
      </section>

    </div>
  </div>
</div>

<script>
const genBtn=document.getElementById('genBtn');
const sheet=document.getElementById('sheet');
const wrap=document.getElementById('wrap');
const simulateBtn=document.getElementById('simulateBtn');
const qrMasuk=document.getElementById('qrMasuk');
const qrKeluar=document.getElementById('qrKeluar');
const jamMasuk=document.getElementById('jamMasuk');
const statusMasuk=document.getElementById('statusMasuk');
const aktifAt=document.getElementById('aktifAt');
const durasi=document.getElementById('durasi');
const biaya=document.getElementById('biaya');
const idMasuk=document.getElementById('idMasuk');
const idKeluar=document.getElementById('idKeluar');
const masuk2=document.getElementById('masuk2');

// Token unik
function generateToken(){
  const chars='ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
  let token='';for(let i=0;i<8;i++)token+=chars.charAt(Math.floor(Math.random()*chars.length));
  return token;
}

// Generate QR
genBtn.onclick=()=>{
  const token=generateToken();
  const now=new Date();
  const tStr=now.toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'});
  const dataIn=`PKR|ID=${token}|T=${now.getTime()}`;
  const dataOut=`PKR|EXIT=${token}|T=${now.getTime()}`;
  qrMasuk.src=`https://api.qrserver.com/v1/create-qr-code/?data=${encodeURIComponent(dataIn)}&size=260x260`;
  qrKeluar.src=`https://api.qrserver.com/v1/create-qr-code/?data=${encodeURIComponent(dataOut)}&size=260x260`;
  jamMasuk.textContent=tStr;
  masuk2.textContent=tStr;
  idMasuk.textContent=`ID: ${token}`;
  idKeluar.textContent=`ID: ${token}`;
  sheet.classList.add('visible');
  wrap.classList.remove('flipped');
  genBtn.disabled=true;
};

// Flip setelah scan
simulateBtn.onclick=()=>{
  const now=new Date();
  aktifAt.textContent=now.toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'});
  statusMasuk.textContent='Terverifikasi';
  wrap.classList.add('flipped');
  setTimeout(()=>{
    durasi.textContent='2 mnt';
    biaya.textContent='Rp 2.000';
  },600);
};
</script>
</body>
</html>
